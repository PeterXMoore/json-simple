<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>json-simple</title>

  <link rel="stylesheet" href="style.css"/>
  <style></style>

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
  <script></script>
</head>
<body>
  <div class="section">
    <h1>Welcome to json-simple's project page</h1>
    <p>
      The json-simple library is meant to be a free lightweight utility for deserializing and serializing Javascript Object Notation (JSON). It aims to be easy to learn and use with a friendly <a href="https://github.com/cliftonlabs/json-simple/blob/master/LICENSE">license</a>.
    </p>
  </div>
  <div class="section">
    <h2>Get json-simple</h2>
    <p>
      Download json-simple's latest release <a href="target/json-simple-3.0.0.jar">jar</a>, <a href="target/json-simple-3.0.0-javadoc.jar">javadocs</a>, and <a href="target/json-simple-3.0.0-sources.jar">source</a>.
    </p>
  </div>
  <div class="section">
    <h3>As a Gradle Dependency</h3>
<pre class="prettyprint">
runtime 'com.github.cliftonlabs:json-simple:3.0.0'
</pre>
  </div>
  <div class="section">
    <h3>As a Maven Dependency</h3>
<pre class="prettyprint lang-xml">
&lt;dependency&gt;
    &lt;groupId&gt;com.github.cliftonlabs&lt;/groupId&gt;
    &lt;artifactId&gt;json-simple&lt;/artifactId&gt;
    &lt;version&gt;3.0.0&lt;/version&gt;
&lt;/dependency&gt;
</pre>
  </div>
  <div class="section">
    <h2>Changes</h2>
    <p>
      View the repository's <a href="https://github.com/cliftonlabs/json-simple/blob/master/CHANGELOG">change log</a> to see what is new.
    </p>
  </div>
  <div class="section">
    <h2>Issues</h2>
    <p>
      Report bugs or request features at the repository's <a href="https://github.com/cliftonlabs/json-simple/issues">issues page</a>.
    </p>
  </div>
  <div class="section">
    <h2>Documentation</h2>
      <p>
        Browse the json-simple latest release <a href="target/apidocs/index.html">javadocs</a>.
      </p>
    <h3>Features</h3>
    <h4>Overview</h4>
      <p>
        See these features in action in the example.
      </p>
      <ul>
        <li>JsonArray extends java.util.ArrayList so it is compatible with all interfaces and utilities that use them.</li>
        <li>JsonObject extends java.util.HashMap so it is compatible with all interfaces and utilities that use them.</li>
        <li>Lenient deserialization so there is no more hunting for the extra/missing comma or a missing colon.</li>
		<li>Deserialization errors tell you the position the error happened at.</li>
        <li>Deserializes numbers larger than Long.MAX_VALUE and smaller than Long.MIN_VALUE using BigDecimals.</li>
        <li>Strong typing with flexiblity, e.g. call #getString(JsonKey) on a Number or boolean and it is implicitly returned as a String or #getInteger(JsonKey) on a BigDecimal or double and get an Integer.</li>
        <li>Strict compliance to RFC 4627 serialization.</li>
        <li>Thread-safe deserialization and serialization.</li>
        <li>Jsonable interface allows you to define how objects are serialized. With a constructor you can define how objects are deserialized.</li>
        <li>JsonKeys and code self documents your JSON data models.</li>
        <li>Easy data model refactoring when using JsonKeys.</li>
        <li>Fast and light weight.</li>
        <li>Thorough javadocs.</li>
      </ul>
    <h4>Example</h4>
<pre class="prettyprint lang-java">
import java.io.IOException;
import java.io.StringWriter;
import java.io.Writer;
import java.util.NoSuchElementException;

import com.github.cliftonlabs.json_simple.JsonException;
import com.github.cliftonlabs.json_simple.JsonArray;
import com.github.cliftonlabs.json_simple.JsonKey;
import com.github.cliftonlabs.json_simple.JsonObject;
import com.github.cliftonlabs.json_simple.Jsonable;
import com.github.cliftonlabs.json_simple.Jsoner;

/** Jsonable example implementation and main demonstrates the library features. */
public class JsonSimpleExample implements Jsonable{
	/* Establish JsonKeys to make sure the code is easier to maintain. To demonstrate both ways I'm using both
	 * interchangeably, choose the one you like. If you're using keys from multiple files and that is acceptable for
	 * you, then consider using a MasterKey enum or class that enumerates or mints the JsonKeys used in the package. */
	/** You could enumerate your keys using ExampleKeys as a template. Typically each key is named after the instance's
	 * fields. */
	enum ExampleKeys implements JsonKey{
		/** Describe any documentation necessary so that it is available when others need to know what the keys mean or
		 * what its value should represent. */
		KEY_ONE("one"),
		@SuppressWarnings("javadoc")
		Key_TWo(2);
		@SuppressWarnings("javadoc")
		private final Object value;

		/** Instantiates a JsonKey with the provided value.
		 * @param value represents a valid default for the key. */
		ExampleKeys(final Object value){
			this.value = value;
		}

		@Override
		public String getKey(){
			/* You can use the enum name as is or have a String field that holds the key itself or ensure the keys are
			 * in a particular format (like lowercase). */
			return this.name();
		}

		@Override
		public Object getValue(){
			/* Can represent a valid default, error value, or null adhoc for the JsonKey. */
			return this.value;
		}
	}

	static{
		/* You could establish class constants for your keys. */
		keyOne = Jsoner.mintJsonKey("key_one", "one");
		keyTwo = Jsoner.mintJsonKey("Key_TWo", 2);
	}
	/** Describe any documentation necessary so that it is available when others need to know what the keys mean or
	 * should be paired with. */
	static final JsonKey	keyOne;
	@SuppressWarnings("javadoc")
	static final JsonKey	keyTwo;
	/** An assortment of data for the instance can be serialized to JSON format. If a non-JSON value is needed you can
	 * make a wrapper that implements Jsonable or do the conversion in the instance's toJson() method. */
	private final String	fieldOne;
	@SuppressWarnings("javadoc")
	private final int		fieldTwo;

	/** Instantiates with example data. */
	private JsonSimpleExample(){
		this.fieldOne = "one";
		this.fieldTwo = 2;
	}

	/** Instantiates JsonSimpleExample using a JsonObject.
	 * @param json represents a JsonSimpleExample in JsonObject form.
	 * @throws NoSuchElementException if KEY_ONE or KEY_TWO is not present in json, it will note which are missing in
	 *         its message. */
	JsonSimpleExample(final JsonObject json){
		json.requireKeys(ExampleKeys.KEY_ONE, JsonSimpleExample.keyTwo);
		this.fieldOne = json.getString(JsonSimpleExample.keyOne);
		this.fieldTwo = json.getInteger(ExampleKeys.Key_TWo);
	}

	/** @param args the command line arguments are ignored. */
	public static void main(final String[] args){
		/* Minting a temporary key for the library demonstration. They should be minted in an enumeration or as class
		 * constants in practice. Also, demonstrates a temporary key minted with a different value for different
		 * contexts. */
		final JsonKey requiredKey = Jsoner.mintJsonKey("required_key", 123);
		final JsonKey missingKeyWithDefault = Jsoner.mintJsonKey("missing_key", "Defaults are convenient.");
		final JsonKey missingKeyWithErrorValue = Jsoner.mintJsonKey(missingKeyWithDefault.getKey(), (byte)-1);
		final JsonKey missingKeyWithMap = Jsoner.mintJsonKey(missingKeyWithDefault.getKey(), new JsonObject());
		final JsonKey missingKeyWithCollection = Jsoner.mintJsonKey(missingKeyWithDefault.getKey(), new JsonArray());
		/* All the variables for the example: */
		final JsonSimpleExample jsonable = new JsonSimpleExample();
		final String jsonInput = "{\"required_key\":123,\"key\":[\"value0\",\"value1\",2,true]}";
		final String carelessInput = "{\"required_key\"123,\"key\":[\"value0\" \"value1\" 2 true],}";
		final String badInput = "{\"required_key\":123,\"key\":[\"value0\",\"value1\",2,true}";
		Object jsonOutput;
		Object carelessOutput;
		Object badOutput;
		JsonObject deserializedObject;
		JsonArray deserializedArray;
		String jsonSerialized;
		String carelessSerialized;
		String badSerialized;
		String serializedObject;
		String serializedArray;
		String jsonPrettyPrinted;
		String carelessPrettyPrinted;
		String badPrettyPrinted;
		String objectPrettyPrinted;
		String arrayPrettyPrinted;
		String asString;
		int asInt;
		double asDouble;
		String castFromMissingKey;
		String defaultedStringFromMissingKey;
		byte errorFromMissingKey;
		JsonObject defaultedMapFromMissingKey;
		JsonArray defaultedCollectionFromMissingKey;
		/* Deserialize stuff in json-simple by handling a DeserializationException. The jsonInput and carelessInput
		 * produce the same result, but since badInput is ambiguous due to the missing ']' to close the nested array it
		 * will produce a DeserializationException. */
		try{
			jsonOutput = Jsoner.deserialize(jsonInput);
		}catch(final JsonException caught){
			/* Oops, json input didn't work. */
			jsonOutput = null;
		}
		try{
			carelessOutput = Jsoner.deserialize(carelessInput);
		}catch(final JsonException caught){
			/* Oops, careless input didn't work. */
			carelessOutput = null;
		}
		try{
			badOutput = Jsoner.deserialize(badInput);
		}catch(final JsonException caught){
			/* Obviously, bad input didn't work. */
			badOutput = null;
		}
		/* You can also deserialize stuff without handling a DeserializationException if you know what you want in
		 * advance and provide a default return object just in case it fails to deserialize your input or wasn't
		 * expected (like having object input when you wanted an array). */
		deserializedObject = Jsoner.deserialize(jsonInput, new JsonObject());
		deserializedArray = Jsoner.deserialize(jsonInput, new JsonArray());
		/* Serialize things into proper JSON format no matter how it was input. */
		jsonSerialized = Jsoner.serialize(jsonOutput);
		carelessSerialized = Jsoner.serialize(carelessOutput);
		badSerialized = Jsoner.serialize(badOutput);
		serializedObject = Jsoner.serialize(deserializedObject);
		serializedArray = Jsoner.serialize(deserializedArray);
		/* You can also pretty print it for your logs with tabs or spaces. */
		jsonPrettyPrinted = Jsoner.prettyPrint(jsonSerialized);
		carelessPrettyPrinted = Jsoner.prettyPrint(carelessSerialized, 4);
		badPrettyPrinted = Jsoner.prettyPrint(badSerialized, 10);
		objectPrettyPrinted = Jsoner.prettyPrint(serializedObject);
		arrayPrettyPrinted = Jsoner.prettyPrint(serializedArray);
		/* JsonObject implement java.util.Map and JsonArray implement java.util.List so you can use the APIs you're
		 * already familiar with. */
		/* Like enforcing a specific key is required: */
		if(!deserializedObject.containsKey("required_key")){
			throw new IllegalStateException("The JSON representation of an object is missing a mandatory key: 'required_key'.");
		}
		/* or using convenience functions added: */
		try{
			deserializedObject.requireKeys(requiredKey, requiredKey, requiredKey);
		}catch(final NoSuchElementException caught){
			/* Can use a more context appropriate throwable or let the exception bubble up to be handled by a
			 * controller. */
			caught.printStackTrace();
		}
		/* You also have some added functionality, like getting and casting in one call with type safety. Notice how the
		 * 'required_key' value is an int. */
		asString = deserializedObject.getString(requiredKey);
		asInt = deserializedObject.getInteger(requiredKey);
		asDouble = deserializedObject.getDouble(requiredKey);
		/* Enforcing that a map contains a specific key can ensure you're working with the data you expect and prevent
		 * something like the following: */
		castFromMissingKey = deserializedObject.getString(missingKeyWithDefault);
		/* castFromMissingKey is silently null just like a Map would return, but may indicate we're
		 * working with data we're not expecting. */
		/* However, objects can also get with defaults if something isn't there if you don't want to make it required
		 * and
		 * want to avoid nulls returned by missing keys (though a null could be returned if the key is explicitly set to
		 * null). */
		defaultedStringFromMissingKey = deserializedObject.getStringOrDefault(missingKeyWithDefault);
		errorFromMissingKey = deserializedObject.getByteOrDefault(missingKeyWithErrorValue);
		defaultedMapFromMissingKey = deserializedObject.getMapOrDefault(missingKeyWithMap);
		defaultedCollectionFromMissingKey = deserializedObject.getCollectionOrDefault(missingKeyWithCollection);
		/* Display the output of the example code: */
		System.out.println("Inputs:");
		System.out.println("JSON: \"" + jsonInput + "\"");
		System.out.println("Careless: \"" + carelessInput + "\"");
		System.out.println("Bad: \"" + badInput + "\"");
		System.out.println();
		System.out.println("Output's toString():");
		System.out.println("Jsonable: " + jsonable.toString());
		System.out.println("JSON: " + jsonOutput);
		System.out.println("Careless: " + carelessOutput);
		System.out.println("Bad: " + badOutput);
		System.out.println("Object: " + deserializedObject);
		System.out.println("Array: " + deserializedArray);
		System.out.println();
		System.out.println("Serialized to JSON:");
		System.out.println("Jsonable: " + jsonable.toJson());
		System.out.println("JSON: " + jsonSerialized);
		System.out.println("Careless: " + carelessSerialized);
		System.out.println("Bad: " + badSerialized);
		System.out.println("Object: " + serializedObject);
		System.out.println("Array: " + serializedArray);
		System.out.println();
		System.out.println("Pretty printed JSON:");
		System.out.println("Jsonable: " + Jsoner.prettyPrint(jsonable.toJson()));
		System.out.println("JSON: " + jsonPrettyPrinted);
		System.out.println("Careless: " + carelessPrettyPrinted);
		System.out.println("Bad: " + badPrettyPrinted);
		System.out.println("Object: " + objectPrettyPrinted);
		System.out.println("Array: " + arrayPrettyPrinted);
		System.out.println();
		System.out.println("The required_key as different types:");
		System.out.println("String: " + asString);
		System.out.println("int: " + asInt);
		System.out.println("double: " + asDouble);
		System.out.println();
		System.out.println("Handling missing_key:");
		System.out.println("Get or getCast: " + castFromMissingKey);
		System.out.println("default String value: " + defaultedStringFromMissingKey);
		System.out.println("default to error value: " + errorFromMissingKey);
		System.out.println("default Map value: " + defaultedMapFromMissingKey);
		System.out.println("default Collection value: " + defaultedCollectionFromMissingKey);
	}

	@Override
	public String toJson(){
		final StringWriter writable = new StringWriter();
		try{
			this.toJson(writable);
		}catch(final IOException caught){
			/* See java.io.StringWriter. */
		}
		return writable.toString();
	}

	@Override
	public void toJson(final Writer writable) throws IOException{
		final JsonObject json = new JsonObject();
		json.put(ExampleKeys.KEY_ONE.getKey(), this.fieldOne);
		json.put(JsonSimpleExample.keyTwo.getKey(), this.fieldTwo);
		json.toJson(writable);
	}
}
</pre>
  </div>
  <div class="section">
    <h2>History</h2>
    <p>
      We hope you like where the project is headed and would love to have your support. There is a project history below for those <a href="https://github.com/cliftonlabs/json-simple/issues/6">interested</a> in the origins of the project.
    </p>
    <p>
      This project was formerly <a href="https://github.com/fangyidong/json-simple">JSON.simple</a> from a <a href="http://code.google.com/p/json-simple/">Google code project</a> by <a href="https://github.com/fangyidong">Yidong</a>.
    </p>
    <p>
      The 1.* versions of the library had the potential to produce bad JSON, its documentation was uncentralized hosted privately in various locations around the Internet, and with many issues open on the project it seemed the upstream was dead and fairly important to many projects since it had a unique architecture. A few of those projects were internal for Clifton Labs, so it was decided there was value in updating the library and attempt to merge upstream to share our work with anyone else that could benefit.
    </p>
    <p>
      After redesigning the library to be backwards compatible it was decided that support for java 2 to 6 would be dropped in favor of generics (thus a 2.* version) as it was the most avidly requested feature. The library was also written in the package org.json.simple so a maven artifact under the org.json.simple groupId made sense. Once all that work was done it was up to the merge with upstream to take over the rest. However, after many emails and external issues only the first part went according to plan. So, the project is now maintained by Clifton Labs and the maven artifacts are now published under the groupId 'com.github.cliftonlabs' (formerly 'com.googlecode.json-simple').
    </p>
    <p>
      The issues above can be reviewed in detail at the following external resources: <a href="https://issues.sonatype.org/browse/OSSRH-24756">the groupId request</a>, <a href="https://github.com/stleary/JSON-java/issues/282">the request for the org.json.simple groupId</a>, and <a href="https://github.com/fangyidong/json-simple/pull/113">the merge upstream</a>.
    </p>
    <p>
      If you've used a version before version 3.0.0 and do not wish to upgrade yet: use version 2.3.0 for the latest backwards compatible version to upgrade 1.* and 2.* code gradually to 3.* style code. Once you're ready to upgrade to 3.* all you need to do is replace import packages with com.github.cliftonlabs.json_simple and replace DeserializationException with JsonException and you'll be good to go.
    </p>
  </div>
  <div class="section">
    <h2>Authors</h2>
    <p>
      Davin Loegering designed and developed the 2.* and 3.* versions.
    </p>
    <p>
      Fang Yidong architected and developed the 1.* versions.
    </p>
    <p>
      Chris Nokleberg contributed to the 1.* versions.
    </p>
    <p>
      Dave Hughes contributed to the 1.* versions.
    </p>
  </div>
  <div class="section">
    <h2>Thanks</h2>
    <p>
      <a href="https://github.com/">Github</a> for providing such a great collaboration platform.<br />
    </p>
    <p>
      <a href="https://cliftonlabs.com/">Clifton Labs</a> for taking over maintenance of the project.<br />
    </p>
    <p>
      <a href="https://github.com/wltjr">William L. Thomson Jr.</a> for early and valuable feedback to help get the project off the ground.
    </p>
  </div>
</body>
</html>
